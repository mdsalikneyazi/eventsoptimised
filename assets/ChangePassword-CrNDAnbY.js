import{r as c,u as p,j as e,I as b,b as g}from"./index-SC4g_td_.js";const w=()=>{const[o,l]=c.useState({newPassword:"",confirmPassword:""}),[a,t]=c.useState({type:"",text:""}),x=p(),{newPassword:s,confirmPassword:n}=o,d=r=>l({...o,[r.target.name]:r.target.value}),u=async r=>{if(r.preventDefault(),s!==n){t({type:"error",text:"Passwords do not match"});return}if(s.length<6){t({type:"error",text:"Password must be at least 6 characters"});return}try{const m={headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}};await g.put("/api/auth/change-initial-password",{newPassword:s},m),t({type:"success",text:"Password updated! Redirecting..."}),setTimeout(()=>{x("/dashboard")},2e3)}catch(i){t({type:"error",text:i.response?.data?.msg||"Error updating password"})}};return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-zinc-900 border border-zinc-800 rounded-xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-full",children:e.jsx(b,{className:"text-2xl text-yellow-500"})})}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Security Update Required"}),e.jsx("p",{className:"text-zinc-400 mt-2 text-sm",children:"This is your first login. Please set a permanent password to secure your account."})]}),a.text&&e.jsx("div",{className:`p-3 rounded-lg mb-6 text-center text-sm font-bold ${a.type==="error"?"bg-red-500/10 border border-red-500/50 text-red-500":"bg-green-500/10 border border-green-500/50 text-green-500"}`,children:a.text}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-zinc-500 uppercase mb-2",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",value:s,onChange:d,required:!0,minLength:"6",className:"w-full bg-zinc-950 border border-zinc-800 text-white rounded-lg px-4 py-3 focus:outline-none focus:border-indigo-500 transition-colors",placeholder:"••••••••"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-zinc-500 uppercase mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"confirmPassword",value:n,onChange:d,required:!0,minLength:"6",className:"w-full bg-zinc-950 border border-zinc-800 text-white rounded-lg px-4 py-3 focus:outline-none focus:border-indigo-500 transition-colors",placeholder:"••••••••"})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-all",children:"Set New Password"})]})]})})};export{w as default};
