import{r as x,j as e,e as S,f as C,g as v,b as g,h as F,i as w,k as j,l as y,m as L,n as T,o as D,p as U,q as A,s as E,t as P,v as I,w as N,F as _,x as z,u as M}from"./index-SC4g_td_.js";const $=({onUploadSuccess:o})=>{const[i,s]=x.useState(null),[r,m]=x.useState(""),[d,n]=x.useState(!1),[c,u]=x.useState(""),t=p=>{s(p.target.files[0]),u("")},l=async p=>{if(p.preventDefault(),!i)return u("Please select a file first.");n(!0),u("");const a=new FormData;a.append("caption",r),a.append("file",i);try{const h=localStorage.getItem("token");console.log("üöÄ SENDING Upload Request...");const b=await g.post("/api/posts/create",a,{headers:{"x-auth-token":h}});console.log("‚úÖ UPLOAD SUCCESS:",b.data),u("Upload Successful! üéâ"),s(null),m(""),o&&o()}catch(h){console.error("‚ùå UPLOAD FAILED:",h);const b=h.response?.data?.msg||"Server connection failed";u(`Failed: ${b}`)}finally{n(!1)}};return e.jsxs("div",{className:"h-full flex flex-col justify-center",children:[c&&e.jsx("div",{className:`mb-4 p-3 rounded-lg text-center font-bold text-sm ${c.includes("Success")?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:c}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"file",onChange:t,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),e.jsx("div",{className:`border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center transition-colors ${i?"border-indigo-500 bg-indigo-500/5":"border-zinc-700 bg-zinc-900/50 hover:bg-zinc-800"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"text-3xl text-indigo-500 mb-2"}),e.jsx("span",{className:"text-sm text-indigo-300 truncate max-w-xs",children:i.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"text-3xl text-zinc-500 mb-2"}),e.jsx("span",{className:"text-sm text-zinc-500",children:"Click to upload"})]})})]}),e.jsx("textarea",{value:r,onChange:p=>m(p.target.value),placeholder:"Caption...",rows:"2",className:"w-full bg-zinc-950 border border-zinc-800 rounded-xl p-4 text-white focus:outline-none focus:border-indigo-500 transition-colors resize-none"}),e.jsx("button",{type:"submit",disabled:d||!i,className:`w-full py-3 rounded-lg font-bold text-white flex items-center justify-center gap-2 ${d?"bg-zinc-700 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"animate-spin"})," Uploading..."]}):"Post Update"})]})]})},R=()=>{const[o,i]=x.useState({name:"",email:"",password:""}),[s,r]=x.useState([]),[m,d]=x.useState("");x.useEffect(()=>{n()},[]);const n=async()=>{try{const t=localStorage.getItem("token"),l=await g.get("/api/auth/all-clubs",{headers:{"x-auth-token":t}});r(l.data)}catch{console.error("Failed to fetch clubs")}},c=async t=>{t.preventDefault();try{const l=localStorage.getItem("token");await g.post("/api/auth/register-club",o,{headers:{"x-auth-token":l}}),d("‚úÖ Club Created Successfully!"),i({name:"",email:"",password:""}),n(),setTimeout(()=>d(""),3e3)}catch(l){d("‚ùå "+(l.response?.data?.msg||"Failed to create club"))}},u=async(t,l)=>{if(window.confirm(`Are you sure you want to delete "${l}"? This cannot be undone.`))try{const p=localStorage.getItem("token");await g.delete(`/api/auth/user/${t}`,{headers:{"x-auth-token":p}}),r(s.filter(a=>a._id!==t)),d(`üóëÔ∏è Deleted ${l}`),setTimeout(()=>d(""),3e3)}catch{alert("Failed to delete club")}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 p-6 rounded-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"text-indigo-500"})," Create New Club Account"]}),m&&e.jsx("div",{className:"mb-4 p-3 bg-zinc-800 text-white rounded text-center font-bold border border-zinc-700",children:m}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-zinc-400 text-sm mb-1",children:"Club Name"}),e.jsx("input",{required:!0,type:"text",className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",value:o.name,onChange:t=>i({...o,name:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-zinc-400 text-sm mb-1",children:"Login Email"}),e.jsx("input",{required:!0,type:"email",className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",value:o.email,onChange:t=>i({...o,email:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-zinc-400 text-sm mb-1",children:"Password"}),e.jsx("input",{required:!0,type:"password",className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",value:o.password,onChange:t=>i({...o,password:t.target.value})})]})]}),e.jsxs("button",{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[e.jsx(w,{})," Create Account"]})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 p-6 rounded-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 border-b border-zinc-800 pb-2",children:"Manage Existing Clubs"}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:s.length===0?e.jsx("p",{className:"text-zinc-500 text-center py-4",children:"No clubs found."}):s.map(t=>e.jsxs("div",{className:"bg-zinc-950 border border-zinc-800 p-4 rounded-lg flex justify-between items-center group hover:border-zinc-700 transition-colors",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:t.name}),e.jsx("p",{className:"text-sm text-zinc-500",children:t.email})]}),e.jsx("button",{onClick:()=>u(t._id,t.name),className:"p-2 text-zinc-600 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete Club",children:e.jsx(j,{})})]},t._id))})]})]})},q=({currentBanner:o,onUpdate:i})=>{const[s,r]=x.useState(!1),m=async d=>{const n=d.target.files[0];if(!n)return;r(!0);const c=new FormData;c.append("file",n);try{const u=localStorage.getItem("token"),t=await g.put("/api/auth/update-banner",c,{headers:{"x-auth-token":u}});i(t.data.bannerUrl)}catch(u){console.error(u),alert("Failed to update banner")}finally{r(!1)}};return e.jsxs("div",{className:"relative w-full h-32 rounded-xl overflow-hidden mb-6 group bg-zinc-800 border border-zinc-700",children:[o?e.jsx("img",{src:o,alt:"Banner",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-indigo-900 to-purple-900 flex items-center justify-center text-zinc-500 text-sm",children:"No Banner Set"}),e.jsxs("label",{className:"absolute inset-0 bg-black/50 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:[s?e.jsx(v,{className:"animate-spin text-white text-2xl"}):e.jsx(y,{className:"text-white text-2xl mb-2"}),e.jsx("span",{className:"text-white text-xs font-bold uppercase",children:"Change Cover Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"hidden",disabled:s})]})]})},B=({currentUser:o,onUpdate:i})=>{const[s,r]=x.useState({description:"",socials:{instagram:"",linkedin:"",website:""},coreTeam:[]}),[m,d]=x.useState(""),[n,c]=x.useState("");x.useEffect(()=>{o&&(d(o.bannerUrl||""),r({description:o.description||"",socials:o.socials||{instagram:"",linkedin:"",website:""},coreTeam:o.coreTeam||[]}))},[o]);const u=()=>{r({...s,coreTeam:[...s.coreTeam,{name:"",role:""}]})},t=(a,h,b)=>{const f=[...s.coreTeam];f[a][h]=b,r({...s,coreTeam:f})},l=a=>{const h=s.coreTeam.filter((b,f)=>f!==a);r({...s,coreTeam:h})},p=async a=>{a.preventDefault(),c("");try{const h=localStorage.getItem("token"),b=await g.put("/api/auth/update-profile",s,{headers:{"x-auth-token":h}});c("‚úÖ Profile Updated Successfully!"),i&&i(b.data),setTimeout(()=>c(""),3e3)}catch{c("‚ùå Update Failed")}};return e.jsxs("div",{className:"space-y-8",children:[" ",e.jsxs("div",{children:[e.jsx("label",{className:"block text-zinc-400 text-xs uppercase font-bold mb-2",children:"Club Cover Photo (Banner)"}),e.jsx(q,{currentBanner:m,onUpdate:a=>d(a)})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n&&e.jsx("div",{className:`p-3 rounded-lg text-center text-sm font-bold ${n.includes("‚úÖ")?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:n}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-zinc-400 text-xs uppercase font-bold mb-2",children:"About Us / Mission"}),e.jsx("textarea",{className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-white focus:border-indigo-500 outline-none h-32 resize-none",value:s.description,onChange:a=>r({...s,description:a.target.value}),placeholder:"Tell students what your club is about..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-zinc-400 text-xs uppercase font-bold mb-2",children:"Social Media"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center bg-zinc-950 border border-zinc-800 rounded-lg px-3 focus-within:border-indigo-500 transition-colors",children:[e.jsx(L,{className:"text-pink-500 flex-shrink-0"}),e.jsx("input",{className:"bg-transparent p-3 w-full text-white outline-none text-sm",placeholder:"Instagram URL",value:s.socials.instagram,onChange:a=>r({...s,socials:{...s.socials,instagram:a.target.value}})})]}),e.jsxs("div",{className:"flex items-center bg-zinc-950 border border-zinc-800 rounded-lg px-3 focus-within:border-indigo-500 transition-colors",children:[e.jsx(T,{className:"text-blue-500 flex-shrink-0"}),e.jsx("input",{className:"bg-transparent p-3 w-full text-white outline-none text-sm",placeholder:"LinkedIn URL",value:s.socials.linkedin,onChange:a=>r({...s,socials:{...s.socials,linkedin:a.target.value}})})]}),e.jsxs("div",{className:"flex items-center bg-zinc-950 border border-zinc-800 rounded-lg px-3 focus-within:border-indigo-500 transition-colors",children:[e.jsx(D,{className:"text-zinc-400 flex-shrink-0"}),e.jsx("input",{className:"bg-transparent p-3 w-full text-white outline-none text-sm",placeholder:"Website URL",value:s.socials.website,onChange:a=>r({...s,socials:{...s.socials,website:a.target.value}})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-zinc-400 text-xs uppercase font-bold",children:"Core Team"}),e.jsxs("button",{type:"button",onClick:u,className:"text-xs bg-zinc-800 hover:bg-zinc-700 text-white px-2 py-1 rounded flex items-center gap-1 transition-colors",children:[e.jsx(w,{})," Add Member"]})]}),e.jsxs("div",{className:"space-y-3",children:[s.coreTeam.map((a,h)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"bg-zinc-950 border border-zinc-800 rounded-lg p-2 text-white text-sm flex-1 focus:border-indigo-500 outline-none",placeholder:"Name",value:a.name,onChange:b=>t(h,"name",b.target.value)}),e.jsx("input",{className:"bg-zinc-950 border border-zinc-800 rounded-lg p-2 text-white text-sm flex-1 focus:border-indigo-500 outline-none",placeholder:"Role",value:a.role,onChange:b=>t(h,"role",b.target.value)}),e.jsx("button",{type:"button",onClick:()=>l(h),className:"text-red-400 hover:text-red-300 p-2 transition-colors",children:e.jsx(j,{})})]},h)),s.coreTeam.length===0&&e.jsx("p",{className:"text-zinc-600 text-sm italic",children:"No team members added yet."})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Save Profile Settings"})]})]})},G=()=>{const[o,i]=x.useState([]),[s,r]=x.useState(!0),m=async()=>{try{const n=localStorage.getItem("token"),c=await g.get("/api/applications/my-applications",{headers:{"x-auth-token":n}});i(c.data)}catch(n){console.error("Error fetching applications",n)}finally{r(!1)}};x.useEffect(()=>{m()},[]);const d=async(n,c)=>{try{const u=localStorage.getItem("token");await g.put(`/api/applications/${n}/status`,{status:c},{headers:{"x-auth-token":u}}),i(t=>t.map(l=>l._id===n?{...l,status:c}:l))}catch{alert("Failed to update status")}};return s?e.jsxs("div",{className:"text-center text-zinc-500 py-10",children:[e.jsx(v,{className:"animate-spin inline mr-2"})," Loading applications..."]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Incoming Applications"}),o.length===0?e.jsx("div",{className:"text-center text-zinc-500 py-10 bg-zinc-950/30 rounded-lg border border-zinc-800 border-dashed",children:"No applications yet."}):o.map(n=>e.jsxs("div",{className:"bg-zinc-950/50 p-4 rounded-lg border border-zinc-800 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:n.studentName}),e.jsxs("p",{className:"text-xs text-zinc-500",children:[n.rollNumber," ‚Ä¢ ",n.studentEmail]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full uppercase font-bold ${n.status==="accepted"?"bg-green-500/20 text-green-400":n.status==="rejected"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:n.status})]}),e.jsxs("div",{className:"bg-zinc-900 p-3 rounded text-sm text-zinc-300",children:['"',n.reason,'"']}),n.status==="pending"&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs("button",{onClick:()=>d(n._id,"accepted"),className:"flex-1 bg-green-600/20 hover:bg-green-600/30 text-green-400 py-2 rounded text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[e.jsx(U,{})," Accept"]}),e.jsxs("button",{onClick:()=>d(n._id,"rejected"),className:"flex-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 py-2 rounded text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[e.jsx(A,{})," Reject"]})]})]},n._id))]})},O=()=>{const[o,i]=x.useState([]),[s,r]=x.useState({title:"",description:"",date:"",location:"",registrationLink:""}),[m,d]=x.useState("");x.useEffect(()=>{n()},[]);const n=async()=>{try{const t=localStorage.getItem("token"),l=await g.get("/api/events/my-events",{headers:{"x-auth-token":t}});i(l.data)}catch{console.error("Failed to fetch events")}},c=async t=>{t.preventDefault();try{const l=localStorage.getItem("token");await g.post("/api/events/create",s,{headers:{"x-auth-token":l}}),d("‚úÖ Event Scheduled!"),r({title:"",description:"",date:"",location:"",registrationLink:""}),n(),setTimeout(()=>d(""),3e3)}catch{d("‚ùå Failed to create event")}},u=async t=>{if(window.confirm("Cancel this event?"))try{const l=localStorage.getItem("token");await g.delete(`/api/events/${t}`,{headers:{"x-auth-token":l}}),i(o.filter(p=>p._id!==t))}catch{alert("Failed to delete")}};return e.jsxs("div",{className:"space-y-8",children:[" ",e.jsxs("div",{className:"bg-zinc-950 border border-zinc-800 p-6 rounded-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"text-indigo-500"})," Schedule New Event"]}),m&&e.jsx("div",{className:"mb-4 p-2 bg-indigo-500/20 text-indigo-300 rounded text-center text-sm font-bold",children:m}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx("input",{required:!0,placeholder:"Event Title",className:"w-full bg-zinc-900 border border-zinc-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",value:s.title,onChange:t=>r({...s,title:t.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{required:!0,type:"datetime-local",className:"w-full bg-zinc-900 border border-zinc-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none text-sm",value:s.date,onChange:t=>r({...s,date:t.target.value})}),e.jsx("input",{required:!0,placeholder:"Location",className:"w-full bg-zinc-900 border border-zinc-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",value:s.location,onChange:t=>r({...s,location:t.target.value})})]}),e.jsx("textarea",{required:!0,placeholder:"Event Details...",rows:"3",className:"w-full bg-zinc-900 border border-zinc-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none resize-none",value:s.description,onChange:t=>r({...s,description:t.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-zinc-500 uppercase mb-2",children:"Registration Link (Optional)"}),e.jsx("input",{type:"url",name:"registrationLink",placeholder:"https://forms.google.com/...",value:s.registrationLink,onChange:t=>r({...s,registrationLink:t.target.value}),className:"w-full bg-zinc-900 border border-zinc-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none"}),e.jsx("p",{className:"text-xs text-zinc-600 mt-1",children:"Paste your Google Form or Luma link here. Leave empty if no registration needed."})]}),e.jsx("button",{className:"w-full bg-white text-black font-bold py-3 rounded-lg hover:bg-zinc-200 transition-colors",children:"Publish Event"})]})]}),e.jsxs("div",{className:"bg-zinc-950 border border-zinc-800 p-6 rounded-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 border-b border-zinc-800 pb-2",children:"Your Upcoming Events"}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:o.length===0?e.jsx("div",{className:"text-center py-8 text-zinc-500 italic bg-zinc-900/50 rounded-lg border border-dashed border-zinc-800",children:"No upcoming events scheduled."}):o.map(t=>e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 p-4 rounded-lg flex justify-between items-center group hover:border-zinc-600 transition-colors",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-lg",children:t.title}),e.jsxs("div",{className:"text-sm text-zinc-400 mt-1 flex gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1 text-indigo-400",children:[e.jsx(P,{})," ",new Date(t.date).toLocaleString([],{dateStyle:"medium",timeStyle:"short"})]}),e.jsxs("span",{className:"flex items-center gap-1 text-zinc-500",children:[e.jsx(I,{})," ",t.location]})]})]}),e.jsx("button",{onClick:()=>u(t._id),className:"p-3 text-zinc-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all",children:e.jsx(j,{})})]},t._id))})]})]})},V=()=>{const[o,i]=x.useState([]),[s,r]=x.useState(!0),[m,d]=x.useState(""),n=async()=>{try{const t=await g.get("/api/posts/feed");i(t.data),r(!1)}catch(t){console.error("Error fetching feed:",t),r(!1)}};x.useEffect(()=>{n()},[]);const c=async t=>{if(window.confirm("‚ö†Ô∏è ADMIN ACTION: Are you sure you want to forcibly remove this post?"))try{const l=localStorage.getItem("token");await g.delete(`/api/posts/${t}`,{headers:{"x-auth-token":l}}),i(o.filter(p=>p._id!==t)),alert("Post removed successfully.")}catch(l){alert("Failed to delete post: "+(l.response?.data?.msg||l.message))}},u=o.filter(t=>t.caption?.toLowerCase().includes(m.toLowerCase())||t.user?.name?.toLowerCase().includes(m.toLowerCase()));return s?e.jsx("div",{className:"text-white text-center py-8",children:"Loading Network Activity..."}):e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(N,{className:"text-yellow-500"}),"Global Moderation Feed"]}),e.jsxs("div",{className:"relative w-full md:w-auto",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-500"}),e.jsx("input",{type:"text",placeholder:"Search content or club...",className:"bg-zinc-950 border border-zinc-800 text-white pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:border-indigo-500 w-full md:w-80",value:m,onChange:t=>d(t.target.value)})]})]}),e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:u.length===0?e.jsx("p",{className:"text-zinc-500 text-center py-8",children:m?`No posts found matching "${m}"`:"No posts found."}):u.map(t=>e.jsxs("div",{className:"bg-zinc-950 border border-zinc-800 rounded-lg p-4 flex gap-4 hover:border-zinc-700 transition-colors group",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 bg-zinc-900 rounded overflow-hidden",children:t.mediaType==="video"?e.jsx("video",{src:t.mediaUrl,className:"w-full h-full object-cover"}):t.mediaType==="raw"||t.mediaType==="document"?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-zinc-800",children:e.jsx(N,{className:"text-zinc-500 text-2xl"})}):e.jsx("img",{src:t.mediaUrl,alt:"Post",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-indigo-400 truncate",children:t.user?.name||"Unknown Club"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:new Date(t.createdAt).toLocaleString()}),e.jsx("p",{className:"text-zinc-300 mt-2 text-sm line-clamp-2",children:t.caption||e.jsx("span",{className:"italic text-zinc-500",children:"No caption"})}),e.jsx("span",{className:"inline-block mt-2 text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded",children:t.mediaType})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>window.open(t.mediaUrl,"_blank"),className:"text-zinc-400 hover:text-white p-2 border border-zinc-700 bg-zinc-900 rounded transition opacity-0 group-hover:opacity-100",title:"View Full Post",children:e.jsx(z,{})}),e.jsx("button",{onClick:()=>c(t._id),className:"text-red-500 hover:text-red-400 p-2 border border-red-500/20 bg-red-500/10 rounded transition hover:bg-red-500/20",title:"Force Delete Post",children:e.jsx(j,{})})]})]})})]},t._id))})]})},W=({currentLogo:o,onUpdate:i,clubName:s})=>{const[r,m]=x.useState(!1),d=async n=>{const c=n.target.files[0];if(!c)return;m(!0);const u=new FormData;u.append("file",c);try{const t=localStorage.getItem("token"),l=await g.put("/api/auth/update-logo",u,{headers:{"x-auth-token":t}});i(l.data.logoUrl)}catch(t){console.error("Logo upload failed",t),alert("Failed to update logo")}finally{m(!1)}};return e.jsxs("div",{className:"relative group w-24 h-24 flex-shrink-0",children:[e.jsx("img",{src:o||`https://ui-avatars.com/api/?name=${s||"Club"}&background=random`,alt:"Club Logo",className:"w-full h-full rounded-full object-cover border-4 border-zinc-800 shadow-lg"}),e.jsxs("label",{className:"absolute inset-0 flex items-center justify-center bg-black/60 rounded-full opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[r?e.jsx(v,{className:"text-white animate-spin text-xl"}):e.jsx(y,{className:"text-white text-xl"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden",disabled:r})]})]})},Z=()=>{const o=M(),[i,s]=x.useState("admin"),[r,m]=x.useState(null),[d,n]=x.useState([]),[c,u]=x.useState("posts"),t={posts:d.length,pending:5,members:142};x.useEffect(()=>{const a=localStorage.getItem("token"),h=localStorage.getItem("userRole");s(h),a||o("/login"),(async()=>{try{const f=await g.get("/api/posts/my-posts",{headers:{"x-auth-token":a}});n(f.data);const k=await g.get("/api/auth",{headers:{"x-auth-token":a}});m(k.data)}catch(f){console.error("Error loading dashboard data",f)}})()},[o]);const l=()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole"),o("/login")},p=async a=>{if(window.confirm("Are you sure you want to delete this post?"))try{const h=localStorage.getItem("token");await g.delete(`/api/posts/${a}`,{headers:{"x-auth-token":h}}),n(d.filter(b=>b._id!==a))}catch{alert("Failed to delete post")}};return e.jsx("div",{className:"min-h-screen bg-zinc-950 pt-14 md:pt-24 px-4 pb-24 md:pb-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-8 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[r&&e.jsx(W,{currentLogo:r.logoUrl,onUpdate:a=>m({...r,logoUrl:a})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:i==="super_admin"?"Super Admin Panel":"Club Dashboard"}),e.jsxs("p",{className:"text-zinc-500 text-sm",children:["Welcome back, ",r?.name||"Admin"]})]})]}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-zinc-800 text-zinc-300 rounded-lg hover:bg-red-900/20 hover:text-red-400 transition-colors",children:"Logout"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800",children:[e.jsx("h3",{className:"text-zinc-500 text-sm font-bold uppercase",children:"Total Posts"}),e.jsx("p",{className:"text-4xl font-bold text-white mt-2",children:t.posts})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800",children:[e.jsx("h3",{className:"text-zinc-500 text-sm font-bold uppercase",children:"Pending Applications"}),e.jsx("p",{className:"text-4xl font-bold text-indigo-400 mt-2",children:t.pending})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800",children:[e.jsx("h3",{className:"text-zinc-500 text-sm font-bold uppercase",children:"Members"}),e.jsx("p",{className:"text-4xl font-bold text-emerald-400 mt-2",children:t.members})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800 h-fit",children:[e.jsx("div",{className:"flex gap-4 mb-6 border-b border-zinc-800 pb-2 overflow-x-auto",children:["posts","settings","applications","events"].map(a=>e.jsx("button",{onClick:()=>u(a),className:`text-sm font-bold pb-2 capitalize whitespace-nowrap ${c===a?"text-white border-b-2 border-indigo-500":"text-zinc-500 hover:text-zinc-300"}`,children:a==="applications"?"Applications":a==="posts"?"Create Post":a},a))}),c==="posts"&&e.jsx($,{}),c==="settings"&&(i==="super_admin"?e.jsx(R,{}):e.jsx(B,{currentUser:r})),c==="applications"&&e.jsx(G,{}),c==="events"&&e.jsx(O,{})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800 h-fit",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:d.length===0?e.jsx("div",{className:"text-center text-zinc-500 py-10",children:"No posts yet. Upload one!"}):d.map(a=>e.jsxs("div",{className:"flex gap-4 p-4 bg-zinc-950/50 rounded-lg border border-zinc-800 hover:border-zinc-700 transition-colors group",children:[e.jsx("div",{className:"w-20 h-20 rounded-md overflow-hidden bg-zinc-800 flex-shrink-0",children:a.mediaType==="video"?e.jsx("video",{src:a.mediaUrl,className:"w-full h-full object-cover opacity-50"}):e.jsx("img",{src:a.mediaUrl,alt:"Post",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:a.caption||"No Caption"}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[new Date(a.createdAt).toLocaleDateString()," ‚Ä¢ ",a.mediaType]}),e.jsxs("div",{className:"flex gap-3 mt-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("button",{onClick:()=>window.open(a.mediaUrl,"_blank"),className:"text-xs flex items-center gap-1 text-zinc-400 hover:text-white",children:[e.jsx(z,{})," View"]}),e.jsxs("button",{onClick:()=>p(a._id),className:"text-xs flex items-center gap-1 text-zinc-400 hover:text-red-400",children:[e.jsx(j,{})," Delete"]})]})]})]},a._id))})]})]}),i==="super_admin"&&e.jsxs("div",{className:"mt-12 pt-8 border-t border-zinc-800",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"‚ö†Ô∏è Super Admin Zone"}),e.jsx(V,{})]})]})})};export{Z as default};
